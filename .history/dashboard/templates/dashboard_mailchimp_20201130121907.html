{% load static %}

<html>

<head>
	<title>Marketing Analytics - Mailchimp</title>
	<meta name="description" content="" />
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />


	<!-- css -->
	<!-- <link rel="stylesheet" type="text/css" href="css/style.css" /> -->
	<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}" />
	<link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}" />

	    <!-- Images -->
		<img src="{% static 'images/loader.gif' %}" style="display:none" id="loader_gif">

	<!-- Jquery  -->
	<script src="{% static 'js/jquery-3.4.1.js' %}"></script>
	<!-- Bootstrap  -->
	<script src="{% static 'js/bootstrap.min.js' %}"></script>
	<!-- Echart -->
	<script src="{% static 'js/echarts.min.js' %}"></script>
	<script src="{% static 'js/echarts-gl.min.js' %}"></script>
 	<!-- ga charts -->
	<script src="{% static 'js/mailchimp_chart_js/js_campaigns.js' %}"></script> 
	<script src="{% static 'js/mailchimp_chart_js/js_opens_chart.js' %}"></script> 
	<script src="{% static 'js/mailchimp_chart_js/js_click_through_chart.js' %}"></script>
	<script src="{% static 'js/mailchimp_chart_js/js_email_send.js' %}"></script>
	<script src="{% static 'js/mailchimp_chart_js/js_ajax_call.js' %}"></script>
	<script src="{% static 'js/charts_js/js_loader.js' %}"></script>


</head>

<body>

	<header>
		<div class="container">
			<div class="dm_header_logo">
				<img src="{% static 'images/media/tentrailslogo1-1.png' %}" />
			</div>
			<div class="dm_header_headtxt">
				<h1>Marketing Analytics Dashboard</h1>
			</div>
			<div class="dm_header_icons">
				<div class="DM_tooltip">
					<img src="{% static 'images/icons/ico_analytics1.png' %}" id="myBtn" data-val="1" class="btnmmgg" />
					<span class="tooltiptext">Analytics</span>
				</div>
				<div class="DM_tooltip">
					<img src="{% static 'images/icons/ico_calander.png' %}" id="myBtn2" data-val="2" class="btnmmgg" />
					<span class="tooltiptext">Select&nbsp;Period</span>
				</div>
				<div class="DM_tooltip">
					<img src="{% static 'images/icons/ico_setting1.png' %}" id="myBtn3" data-val="3" class="btnmmgg" />
					<span class="tooltiptext">KPI&nbsp;Settings</span>
				</div>
				<div class="DM_tooltip DM_tooltiplogout" id="logout_click">
					<a href="/logout"></a><img src="{% static 'images/icons/ico_logout1.png' %}" />
					<span class="tooltiptext">Logout</span>
				</div>
			</div>
			<div class="clear"></div>
		</div>
	</header>



	<!-- drop down sections -->
	<!-- Analytics drop down -->
	<div id="myModal1" class="modal">
	  <!-- Modal content -->
	  <div class="modal_content">    
		<span class="close" id="closebox1">&times;</span>      
		<div class="modal-body dm_analytics_drop">
		   <ul>	
				<li><a href="#" onclick="home()">Google Analytics</a></li>
				<li><a href="#" onclick="redir_sm()">Social Media</a></li>
				<li><a href="#" onclick="redir_mc()">Mailchimp</a></li>
		  </ul>
		</div>   
	  </div>
	</div>


	<!-- Calendar  -->
	<div id="myModal2" class="modal">
	  <!-- Modal content -->
	  <div class="modal_content">    
		  <span class="close" id="closebox2">&times;</span>      
		<div class="modal-body dm_calendar_drop">
			<p>Select Period</p>
			<select id='period_dropdown' onchange="dropdown_onchange_weekly_daily()">
				<option>Quarterly</option>
				<option>Monthly</option>
				<option>Weekly</option>
				<option selected>Daily</option>
			</select>
			<select id='year_dropdown'>
				<!-- <option>Select</option> -->
				<option  selected>2020</option>
				<option>2019</option>
				<option>2018</option>
			</select>
			<select id='month_dropdown'>
				<!-- <option>Select</option> -->
				<option value="1">January</option>
				<option value="2">February</option>
				<option value="3">March</option>
				<option value="4">April</option>
				<option value="5">May</option>
				<option value="6">June</option>
				<option value="7">July</option>
				<option value="8">August</option>
				<option value="9">September</option>
				<option value="10">Octtober</option>
				<option selected value="11">November</option>
				<option value="12">December</option>

			</select>
			<!-- <select id='period_dropdown' onchange="dropdown_onchange_weekly_daily()">
				<option>Quarterly</option>
				<option>Monthly</option>
				<option>Weekly</option>
				<option>Daily</option>
			</select> -->
			<div align="right"><a href="#" onclick="dropdown_onchange()">Apply</a></div>
		</div>
	   
	  </div>
	</div>

	<!-- The Modal 3 -->
	<div id="myModal3" class="modal">
	  <!-- Modal content -->
	  <div class="modal_content">    
		  <span class="close" id="closebox3">&times;</span>
		  
		<div class="modal-body dm_kpi_drop">
			<h3>KPI Details</h3>
			<div class="DM_form-group_all">
			  <input type="checkbox" id="selectAll">
			  <label for="selectAll">All</label>
			</div>
			<div class="DM_form-group">
			  <input type="checkbox" id="summary">
			  <label for="summary">Summary</label>
			</div>
			<div class="DM_form-group">
			  <input type="checkbox" id="engagement">
			  <label for="engagement">Engagement</label>
			</div>
			<div class="DM_form-group">
			  <input type="checkbox" id="impressions">
			  <label for="impressions">Impressions</label>
			</div>
			<div class="DM_form-group">
			  <input type="checkbox" id="likes">
			  <label for="likes">Likes</label>
			</div>
			<div class="DM_form-group">
			  <input type="checkbox" id="followers">
			  <label for="followers">Fans & Followers</label>
			</div>
			
			<h4 class="fbsec"><img src="{% static 'images/icons/ico_fb.png' %}" />Facebook</h4>
			<div class="DM_form-group">
			  <input type="checkbox" id="postviews">
			  <label for="postviews">Post Views</label>
			</div>
			<div class="DM_form-group">
			  <input type="checkbox" id="gendervsage">
			  <label for="gendervsage">Gender vs Age Group</label>
			</div>
			<div class="DM_form-group">
			  <input type="checkbox" id="videoviews">
			  <label for="videoviews">Video Views</label>
			</div>
			<div class="DM_form-group">
			  <input type="checkbox" id="clicks">
			  <label for="clicks">Clicks</label>
			</div>
			  
			<h4 class="twitsec"><img src="{% static 'images/icons/ico_twit.png' %}" />Twitter</h4>
			<div class="DM_form-group">
			  <input type="checkbox" id="twitvideoviews">
			  <label for="twitvideoviews">Video Views</label>
			</div>
			 
			<h4 class="instasec"><img src="{% static 'images/icons/ico_insta.png' %}" />Instagram</h4>
			<!--<div class="DM_form-group">
			  <input type="checkbox" id="fbhhhh">
			  <label for="fbhhhh">&nbsp;</label>
			</div>-->
		</div>
	   
	  </div>
	</div>

	<!-- drop down sections -->
 
	<section class="container">
		<!-- Breadcrumb view -->
		<div class="dm_breadcrumb">
			<h3>Mailchimp Overview - <span>Q1 2020</span></h3>
		</div>
		<!-- Breadcrumb view -->
	</section>


	<section class="container">
		<!-- Summary view -->
		<div class="dm_summary dm_summay_mailchimp">
			<div class="dm_summary_box" >
				<p>Campaigns</p>
				<h2 id="tc_total_campaigns"></h2>
			</div>

			<div class="dm_summary_box" >
				<p>Mail Sent</p>
				<h2 id="tc_total_mail_sent"></h2>
			</div>

			<div class="dm_summary_box" >
				<p>Opens</p>
				<h2 id="tc_total_opens"></h2>
			</div>

			<div class="dm_summary_box">
				<p>Unique Opens</p>
				<h2 id="tc_unique_opens"></h2>
			</div>

			<div class="dm_summary_box" >
				<p>Clicks</p>
				<h2 id="tc_total_clicks"></h2>
			</div>
			
			<div class="dm_summary_box" >
				<p>Spam Complaints</p>
				<h2 id="tc_total_spams"></h2>
			</div> 
			<div class="clear"></div>
		</div>
		<!-- Summary view -->
	</section> 
 
	<section class="dm_chart_contain">
		<!-- Charts view -->
		<div class="container">
			<div class="dm_chartbox dm_twoclmn">
				<h4>Total Opens & Unique Opens</h4>
				<div class="dm_chart_area">
					<!-- chat -->
					<div id="opens_chart_container" style="width: 100%; height: 100%;"></div>
				</div>
			</div>

			<div class="dm_chartbox dm_twoclmn">
				<h4>Top Campaigns</h4>
				<div class="dm_chart_area">
					<!-- chat -->
					<div id="campaigns_chart_container" style="width: 100%; height: 100%;"></div>
				</div>
			</div>

			<div class="dm_chartbox dm_twoclmn">
				<h4>Click Through & Click Through Rate</h4>
				<div class="dm_chart_area">
					<!-- chat -->
					<div id="clickThrough_chart_container" style="width: 100%; height: 100%;"></div>
				</div>
			</div>

			<div class="dm_chartbox dm_twoclmn">
				<h4>Email Send - Day Of Week</h4>
				<div class="dm_chart_area">
					<!-- chat -->
					<div id="emailSend_chart_container" style="width: 100%; height: 100%;"></div>
				</div>
			</div>

			<div class="clear"></div>
		</div>
		<!-- Charts view -->
	</section>


	<script>
		var axis_color = "#757575"
		var axis_opacity = 0.5
		var opens_chart_obj= null


		var post_period = '{{period_value | default:"Monthly"}}'
    var post_year = '{{year_val | default:"2020"}}'
		var post_month = '{{month_val | default:"1"}}'
		per_initial()

		

		function prepare_chart(period, period2) {
			ajax_email_send_chart(period)
			ajax_opens_chart(period)
			ajax_top_campaign_chart(period)
			ajax_click_through_chart(period)
			ajax_campaigns_top_chart(period)
			
		}
		function per_initial() {
			$("#period_dropdown").val(post_period)
			$("#year_dropdown").val(post_year)
			$("#month_dropdown").val(post_month)
			dropdown_onchange()
			
		}
		function dropdown_onchange_weekly_daily(){
			if ($("#period_dropdown option:selected").text() == "Daily" || $("#period_dropdown option:selected").text() == "Weekly") {
				$('#month_dropdown').show()
			} else {
				$('#month_dropdown').hide()
			}
		}
		function dropdown_onchange() {
			if ($("#period_dropdown option:selected").text() == "Daily" || $("#period_dropdown option:selected").text() == "Weekly") {
				$('#month_dropdown').show()
			} else {
				$('#month_dropdown').hide()
			}
			prepare_chart(($("#period_dropdown option:selected").text()))
			$('#closebox2').click();
			// minimize_container()
		}
		
	//	$(document).ready(function(){
		//	campaigns_chart();
		//	opens_chart();
		//	email_send_chart();
		//	mailchimp_click_through();
	//	});
	</script>
<script>

$(".btnmmgg").click(function(e) {
   
	$(".modal").css("display","none");
	
	 $("#myModal"+$(this).attr("data-val")).css("display","block");
	 e.stopPropagation();
	
});

$(".close").click(function(e) {
	$(".modal").css("display","none");	
});

jQuery(document).ready(function ($) {
	$("#logout_click").click(function () {
		$("#DM_tooltip").click();

		/* if ($("#author_bio_wrap_toggle").text() == "Expand Author Details")
		 {			
			 $("#author_bio_wrap_toggle").html("Hide Author Details")
		 }
		 else 
		 {		
			 $("#author_bio_wrap_toggle").text("Expand Author Details")
		 }*/
	});
});
/*
$('body').click(function(){
   //alert( $(this).parents().eq(2).attr('id'));	
})
$(document).click(function(e) {
alert("MMGG");
    if (!$(e.target).is("#myModal1")) {
        if ($('#myModal1').is(':visible')) {
            $(".modal").css("display","none");
        }
    }
});*/

$('#selectAll').click(function() {
		   if(this.checked) {
			   $(':checkbox').each(function() {
				   this.checked = true;                        
			   });
		   } else {
			  $(':checkbox').each(function() {
				   this.checked = false;                        
			   });
		   } 
		});

	function redir_sm() {
			$('input[name="period_value"]').val($("#period_dropdown option:selected").text());
			$('input[name="period_year"]').val($("#year_dropdown option:selected").text());
			$('input[name="period_month"]').val($("#month_dropdown option:selected").val());
			$("#redir_form").attr('action', '/social_dashboard')
			$("#redir_form").submit()
	}
	
	
	function redir_mc() {
			
			$('input[name="period_value"]').val($("#period_dropdown option:selected").text());
			$('input[name="period_year"]').val($("#year_dropdown option:selected").text());
			$('input[name="period_month"]').val($("#month_dropdown option:selected").val());
			$("#redir_form").attr('action', '/mailchimp_dashboard')
			$("#redir_form").submit()
	}
	
	
	function home() {
    $('input[name="period_value"]').val($("#period_dropdown option:selected").text());
    $('input[name="period_year"]').val($("#year_dropdown option:selected").text());
    $('input[name="period_month"]').val($("#month_dropdown option:selected").val());
    $("#redir_form").attr('action', '/ga_dashboard')
    $("#redir_form").submit()
}


</script>
<form action="" method="POST" id="redir_form">
	{% csrf_token %}
	<input type="hidden" name="period_value" value="">
	<input type="hidden" name="period_month" value="">
<input type="hidden" name="period_year" value="">
<input type="hidden" name="ga_kpi_selected" value="">
<input type="hidden" name="sm_kpi_selected" value="">
<input type="hidden" name="mc_kpi_selected" value="">
<input type="hidden" name="redir_page" value="">
</form>
</body>

</html>
